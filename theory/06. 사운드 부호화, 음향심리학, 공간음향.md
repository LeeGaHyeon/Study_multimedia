## 06. 사운드 부호화, 음향심리학, 공간음향 
### Coding 
- 표본화 및 양자화한 데이터를 디지털 파일에 저장하는 과정 
- PCM, DPCM, DM, MPEG 등

### PCM 
- sampling, quantization 진행
- 디지털 신호를 추가적인 처리없이 그대로 기록
- 데이터양이 매우 많아지지만 잡음에 강하고 전송중에도 재생할 수 있음 

### DPCM 
- 이전과 현재의 값의 차이를 저장하는 방식
- 일반적으로 오차값이 원본값보다 작으므로 더욱 작은 비트 수로 저장 가능
- PCM에 비해 숫자 범위가 작아지고, 반복 빈도 늘어남. -> 엔트로피 코디에 적합

### DM 
- 더 원시적인 방법
- 값의 차이를 1비트로 표현
   - 매우 간단
   - 고주파 표현 X : 경사 부하 왜곡 (slope overload) -> 파장이 길면 사용하는데 문제 없지만 파장이 짧으면 DM으로 표현하기 힘들다. 
   - 111111101000000010111111100000000101111 : 101 에서 소리가 유지됨을 보여줌.

### PCM에서의 비선형 양자화 
- 선형 양자화는 일정한 간격(등간격)으로 코딩하지만 
- 비선형 양자화는 아랫쪽으로 갈수록 (X축에 가까워질수록) 간격이 작아지고 윗쪽으로 갈수록 차이가 커진다.
  - 즉, 소리가 클수록 차이를 많이 벌리고 소리가 작을수록 차이를 적게 벌린다. 
  - 사람이 작은 소리를 더 잘 구별할 수 있어서 디테일한 작은 소리에 조정을 키우는 것임. 
- 큰 차이에 있는 데이터는 적기때문에 엔트로피코딩에서 같은품질, 같은용량 대비 음질을 향상하는 효과를 볼 수 있다. 
- 같은 음질을 느끼는 상태에서는 용량 줄일 수 있다. 

## M 값을 조정함에 따라서 양자화하는 간격을 등간격 -> 비선형적으로 구부릴 수 있다. 

### MPEG 
- 동영상 코딩하는 그룹에서 만든 오디오 주포맷
- 지각부호화, 음향심리학 사용
- MPEG 1 : layer1 layer2 layer3 (표준제시 -> 아북률 보임)
- MPEG 2 : 5.1 채널 

### 디지털 사운드 크기 
- 엔트로피코딩 안했다고 가정했을때 PCM 기준, 
- file_size = 초당 몇개의 데이터 샘플이 있는가 (Hz) x 데이터 샘플 당 비트 수 x 채널은 무엇 (스테레오, 모노, 5.1 등등) x 시간 
- 채널 : 오른쪽 왼쪽 들리는게 동일하다고 하면 채널이 1개, 다르게 처리한다면 채널이 2개 필요 
- 모드 : stero = 오른쪽 왼쪽 다르게 들린다. / mono  = 오른쪽 왼쪽 똑같이 들린다. 

### 사운드 파일 종류 
- wav 
- mp3 
  - MPEG1 : layer2 는 확장자로 .mp2 / layer3 는 확장자로 .mp3 
  - MPEG2 : layer2 는 aac의 확장자

## 사운드-음향 심리학적 특징 
### 중요 !! 주파소 분석
- 소리가 초당 몇번이 떨리는가에 따라 고음, 저음으로 느낄 수 있음. 
- 푸리에 변환 (주파수 변환) 을 통해 소리 성분 파악 가능 

### 중요 !! Fourier Transform (푸리에 변환, 주파수 변환)
- 푸리에 변환은 시간이나 공간에서 샘플링된 신호를 주파수에서 샘플링된 동일한 신호와 연결시키는 수학적 공식
- 신호처리에서 푸리에 변환은 신호의 중요한 특성, 즉 주파수 성분을 나타낼 수 있다. 

### 주파수 분석 
- 푸리에 변환을 통해 해당 단위 시간 내에서 어떤 주파수에 음이 들어 있을 것이다 라는걸 보임.

### 시간-주파수 분석 (spectrogram)
- 단위 시간에서 어떤 주파수 성분이 들어있는지 단위 시간별로 추출
- 주파수를 히스토그램 형태로 나타낸 것 

### 가청 한계
- 가청도 
  - 인간이 인지할 수 있는 소리 수준(크기)과 주파수 범위 
- 가청 한계
  - 특정 주파수의 순음을 재생할 때 인지할 수 있는 최소 소리 크기
  - 주파수에 따라 다르게 나타남 

### Minimum Audibility Curve
- 주파수가 커지면 사람이 듣는데 필요한 음압레벨도 올라감 
- 10Hz 미만 사람이 들을 수 없고 20kHz이상이면 소리가 아무리 커져도 사람이 인지 못한다. 
- 그림참고 ~

### Equal-Loudness Response curves
- 플레처-문손 곡선 
- 1phon은 1k 주파수에서 1dB를 뜻함 
- 해당 phon 곡선에 있는 모든 경우 소리가 작든 크든 동일하게 들린다.
- 그림참고 ~

### Masking Effect
- 강하게 발생시킨 음 주변에 있는 비슷한 주파수에 있는 음은 다 묻힘.

### Critical Band 
- 해당 대역폭에 대한 critical band 발생 
- 해당주파수-해당대역폭 ~해당주파수+해당대역폭 범위내에 해당하는 음은 가려져서 안들리게 됨.
- 그림참고 ~ 

### Temporal Mask Effect
- 후방성 바스킹 : 큰 소리 (예를들어 총소리) 들리기 직전의 소리도 인지 못함 
- 시간으로 봤을 때 큰 소리가 발생한 시간으로부터 일정 시간동안 소리가 들리지 않음 

### 기타 특징 
- 칵테일 파티 효과
  - 시끄러운 상황에서도 대화 알아들을 수 있고 사람 목소리 구별 가능 -> 음향심리학적 특징에 따라 집중하는 소리 더 잘 들림
- 선행음 효과 (하스 효과)
  - 스피커 두군데서 같은 소리가 들리는데 한쪽에서 약간 늦게 나오면 사람이 듣기에 먼저 나온 스피커에서만 소리가 들리는 것으로 착각 (음향 심리학적 효과)

### 청각심리학과 데이터압축
- 지각부호화 
  - 인간이 지각할 수 있는 소리만 코드화하여 신호처리 
    - 저장해야하는 정보의 양이 크게 줄어 듬
    - 큰 음이 발생했을때 mask effect로 일부 구간에 소리를 못듣는다고 가정하자, 큰음 발생 직후값 0으로 저장, if 0이 20개라고 하면 '런랭스코딩'을 통해 압축 -> data 양 줄어듦 

### MP3 인코더 개요 
- 손실압축
  - 압축을 한번 가하는 과정에서 손상되는 음질은 되돌릴 수 없음
    - 손실되는 부분은 일바인은 구분하기 어려움 
  - 인코딩에 대한 정확한 정의를 표준화 하지 않음
    - 따라서 같은 음질이라도 인코더에 따라 품질 차이가 날 수 있음
   
### 중요 !! 흐름 이해
- 꼭 그림 참고할 것
- 1단계 : 지각 부호화 
  - 서브밴드 코딩 : 사람이 민감한 부분은 잘게 분리, 둔감한 부분은 넓게 나눔
- 2단계 : 양자화 및 엔트로피 코딩
  - 양자화 후 허프만 코드로 변환 

### MP3 디코더
- 허프만 디코딩 -> 역 양자화 -> inverse MDCT -> 복원

## 입체 사운드 => 자료 참고 ~ 
### 입체 사운드란?
- 재생 사운드로부터 방향감, 거리감, 공간감등의 공간적인 단서를 지각할 수 있는 사운드 

